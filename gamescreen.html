<!DOCTYPE html>
<html class="dark" lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>IonChain | Game</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap"
    rel="stylesheet" />
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#13ec80",
            "secondary": "#0d59f2",
            "background-light": "#f6f8f7",
            "background-dark": "#102219",
            "surface-dark": "#16251d",
          },
          fontFamily: {
            "display": ["Space Grotesk", "sans-serif"],
            "body": ["Space Grotesk", "sans-serif"]
          }
        },
      },
    }
  </script>
  <style>
    body {
      font-family: "Space Grotesk", sans-serif;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
    }

    .tile-selected {
      border-color: #13ec80cc;
      background-color: rgba(19, 236, 128, 0.2);
      box-shadow: 0 0 15px rgba(19, 236, 128, 0.3);
      transform: scale(0.95);
    }

    /* Mobile Scroll */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>

<body class="bg-gray-900 min-h-screen flex items-center justify-center p-4">

  <!-- Mobile Frame -->
  <div
    class="relative w-[412px] h-[915px] bg-background-dark rounded-[2.5rem] shadow-2xl overflow-hidden border-[8px] border-gray-800 ring-2 ring-gray-700 flex flex-col">

    <!-- Camera Hole -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 h-6 w-32 bg-black rounded-b-xl z-50 pointer-events-none"></div>

    <!-- Game Header (Absolute) -->
    <header
      class="absolute top-0 left-0 right-0 p-4 pt-8 flex justify-between items-center z-40 bg-background-dark/80 backdrop-blur-sm border-b border-primary/10">
      <div class="flex flex-col">
        <span class="text-[10px] uppercase font-bold text-slate-400 tracking-widest">Multiplier</span>
        <span class="text-2xl font-bold font-display text-primary">x2.5</span>
      </div>

      <div class="flex flex-col items-center">
        <div class="bg-surface-dark border border-white/10 px-4 py-1 rounded-full flex gap-2 items-center">
          <span class="material-symbols-outlined text-primary text-sm">schedule</span>
          <span class="font-bold font-display text-white">0:45</span>
        </div>
      </div>

      <div class="flex flex-col items-end">
        <span class="text-[10px] uppercase font-bold text-slate-400 tracking-widest">Score</span>
        <span class="text-2xl font-bold font-display text-white">1,240</span>
      </div>
    </header>

    <!-- Game Main Content -->
    <main class="flex-1 flex items-center justify-center p-4 pt-24 pb-24 overflow-y-auto no-scrollbar">
      <div id="game-grid" class="grid grid-cols-4 gap-3 w-full max-w-sm aspect-square">
        <!-- Tiles generated by JS below to simulate real state -->
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Na" data-charge="1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+1</span>
          <p class="text-2xl font-bold text-white">Na</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Cl" data-charge="-1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-1</span>
          <p class="text-2xl font-bold text-white">Cl</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="H" data-charge="1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+1</span>
          <p class="text-2xl font-bold text-white">H</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="O" data-charge="-2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-2</span>
          <p class="text-2xl font-bold text-white">O</p>
        </div>
        <!-- More filler tiles -->
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="K" data-charge="1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+1</span>
          <p class="text-2xl font-bold text-white">K</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="I" data-charge="-1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-1</span>
          <p class="text-2xl font-bold text-white">I</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Mg" data-charge="2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+2</span>
          <p class="text-2xl font-bold text-white">Mg</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="S" data-charge="-2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-2</span>
          <p class="text-2xl font-bold text-white">S</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Ca" data-charge="2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+2</span>
          <p class="text-2xl font-bold text-white">Ca</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="F" data-charge="-1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-1</span>
          <p class="text-2xl font-bold text-white">F</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Cu" data-charge="2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+2</span>
          <p class="text-2xl font-bold text-white">Cu</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="O" data-charge="-2">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-2</span>
          <p class="text-2xl font-bold text-white">O</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Li" data-charge="1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+1</span>
          <p class="text-2xl font-bold text-white">Li</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Br" data-charge="-1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">-1</span>
          <p class="text-2xl font-bold text-white">Br</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Ag" data-charge="1">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">+1</span>
          <p class="text-2xl font-bold text-white">Ag</p>
        </div>
        <div
          class="tile bg-surface-dark rounded-xl border border-white/10 flex flex-col items-center justify-center relative cursor-pointer active:scale-95 transition-all duration-100"
          onclick="toggleTile(this)" data-ion="Au" data-charge="0">
          <span class="absolute top-1 right-2 text-[10px] font-bold opacity-60 text-white">0</span>
          <p class="text-2xl font-bold text-yellow-500">Au</p>
        </div>
      </div>
    </main>

    <!-- Controls (Bottom) -->
    <div
      class="absolute bottom-0 left-0 right-0 p-6 flex flex-col gap-4 bg-background-dark/95 backdrop-blur-md pb-8 pt-4 border-t border-white/5 z-40">
      <button id="reaction-btn" onclick="attemptReaction()"
        class="w-full h-16 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center gap-3 text-slate-400 font-bold uppercase tracking-widest transition-all">
        <span class="material-symbols-outlined">vibration</span>
        Select Ions...
      </button>

      <a href="summary_screen.html"
        class="w-full text-center text-[10px] font-bold uppercase tracking-widest text-slate-600 hover:text-white mt-1">
        End Session
      </a>
    </div>
  </div>

  <script>
    let selectedTiles = [];

    function toggleTile(element) {
      // Check if already selected
      const index = selectedTiles.indexOf(element);
      if (index > -1) {
        // Deselect
        selectedTiles.splice(index, 1);
        element.classList.remove('tile-selected');
        element.classList.remove('border-primary');
        element.classList.add('border-white/10');
      } else {
        // Select
        if (selectedTiles.length < 3) { // Limit selection
          selectedTiles.push(element);
          element.classList.add('tile-selected');
          element.classList.add('border-primary');
          element.classList.remove('border-white/10');
        }
      }
      updateButtonState();
    }

    function updateButtonState() {
      const btn = document.getElementById('reaction-btn');
      if (selectedTiles.length >= 2) {
        btn.classList.remove('bg-white/5', 'text-slate-400');
        btn.classList.add('bg-primary', 'text-background-dark', 'shadow-lg', 'shadow-primary/40');
        btn.innerHTML = '<span class="material-symbols-outlined">experiment</span> REACT (SHAKE)';
      } else {
        btn.classList.add('bg-white/5', 'text-slate-400');
        btn.classList.remove('bg-primary', 'text-background-dark', 'shadow-lg', 'shadow-primary/40');
        btn.innerHTML = '<span class="material-symbols-outlined">vibration</span> Select Ions...';
      }
    }

    function attemptReaction() {
      if (selectedTiles.length < 2) return;

      // Simple Logic for Prototype
      let ions = selectedTiles.map(t => t.innerText.trim());
      let charges = selectedTiles.map(t => parseInt(t.dataset.charge));
      let netCharge = charges.reduce((a, b) => a + b, 0);

      // Mock Validation: Na + Cl is Valid. H + O is Invalid (needs 2H).
      const isNaCl = ions.includes('Na') && ions.includes('Cl') && ions.length === 2;
      const isMgO = ions.includes('Mg') && ions.includes('O') && ions.length === 2;

      // Allow if Charge is 0 (Valid Salt)
      if (netCharge === 0) {
        // Success
        window.location.href = "summary_screen.html"; // For now assume win -> summary
      } else {
        // Fail
        // Alert for prototype purposes, ideally navigate or modal
        window.location.href = "summary_screen.html"; // Redirect to summary/fail for now or handle inline
      }
    }
  </script>
</body>

</html>